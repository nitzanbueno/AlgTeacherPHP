<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Add an Algorithm</title>
    <script>
    function generateImage()
    {
      var moves = document.forms["addAlg"]["alg"].value;
      var stage = document.getElementById("stage").value;
      var format = document.getElementById("format").value;
      var view = document.getElementById("view").checked;
      var preview = document.getElementById("preview").checked;
      var url = "http://stachu.cubing.net/v/?fmt=" + format + "&size=200" + "&case=" + moves;
      if(stage != "" && stage != null)
      {
        url += "&stage=" + stage;
      }
      if(view)
      {
        url += "&view=plan";
      }
      document.forms["addAlg"]["imagelink"].value = url;
      if(preview)
      {
        window.open(url, '_blank');
      }
    }
    function toggle()
    {
      var div = document.getElementById("generateDiv");
      if (div.style.display !== 'none') {
          generateImage();
      } else {
        div.style.display = 'block';
      }
    }
    </script>
  </head>
  <body>
    <form name="addAlg" action="add.php" method="post">
      <table>
        <tr><td>Enter category here:</td><td><input type="text" autocomplete="off" name="category" required></td></tr>
        <tr><td>Enter description here:</td><td><input type="text" autocomplete="off" name="description" required></td></tr>
        <tr><td>Enter alg here:</td><td><input type="text" name="alg" autocomplete="off" required></td></tr>
        <tr>
          <td>Enter image link here:</td>
          <td><input type="text" name="imagelink" autocomplete="off" required></td>
          <td><button type="button" onclick="toggle()">Generate</button></td>
          <td>
            <div style="display:none" id="generateDiv">
              Stage: <select id="stage">
                <option value="" selected="selected">None</option>
                <option value="oll">OLL</option>
                <option value="ll">LL</option>
                <option value="f2l">F2L</option>
                <option value="wv">WV</option>
                <option value="coll">COLL</option>
              </select> <br/>
              Format: <select id="format">
                <option value="svg">SVG</option>
                <option value="png">PNG</option>
                <option value="jpg">JPG</option>
              </select> <br/>
              Top View <input type="checkbox" id="view" value="true"><br/>
              Preview <input type="checkbox" id="preview" value="true">
            </div>
          </td>
         </tr>
      </table>
        <button type="submit" formmethod="post">Submit alg</button>
    </form>
  </body>
</html>
